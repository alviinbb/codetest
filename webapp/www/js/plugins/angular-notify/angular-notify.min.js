angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(e,t,n,a,i){var o=10,r=15,s=1e4,c="angular-notify.html",l="center",p=document.body,m=0,f=[],u=[],g=function(g){"object"!=typeof g&&(g={message:g}),g.duration=g.duration?g.duration:s,g.templateUrl=g.templateUrl?g.templateUrl:c,g.container=g.container?g.container:p,g.classes=g.classes?g.classes:"";var d=g.scope?g.scope.$new():i.$new();if(d.$position=g.position?g.position:l,d.$message=g.message,d.$classes=g.classes,d.$messageTemplate=g.messageTemplate,m>0)for(var h=u.length+1-m,y=0;h>y;y++)u[y].$close();t.get(g.templateUrl,{cache:a}).then(function(t){var a=n(t.data)(d);if(a.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(e){("opacity"===e.propertyName||0===e.currentTarget.style.opacity||e.originalEvent&&"opacity"===e.originalEvent.propertyName)&&(a.remove(),f.splice(f.indexOf(a),1),u.splice(u.indexOf(d),1),c())}),g.messageTemplate){for(var i,s=0;s<a.children().length;s++)if(angular.element(a.children()[s]).hasClass("cg-notify-message-template")){i=angular.element(a.children()[s]);break}if(!i)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+g.templateUrl+".");i.append(n(g.messageTemplate)(d))}angular.element(g.container).append(a),f.push(a),"center"===d.$position&&e(function(){d.$centerMargin="-"+a[0].offsetWidth/2+"px"}),d.$close=function(){a.css("opacity",0).attr("data-closing","true"),c()};var c=function(){for(var e=0,t=o,n=f.length-1;n>=0;n--){var a=10,i=f[n],s=i[0].offsetHeight,c=t+s+a;i.attr("data-closing")?c+=20:t+=s+r,i.css("top",c+"px").css("margin-top","-"+(s+a)+"px").css("visibility","visible"),e++}};e(function(){c()}),g.duration>0&&e(function(){d.$close()},g.duration)},function(e){throw new Error("Template specified for cgNotify ("+g.templateUrl+") could not be loaded. "+e)});var $={};return $.close=function(){d.$close&&d.$close()},Object.defineProperty($,"message",{get:function(){return d.$message},set:function(e){d.$message=e}}),u.push(d),$};return g.config=function(e){o=angular.isUndefined(e.startTop)?o:e.startTop,r=angular.isUndefined(e.verticalSpacing)?r:e.verticalSpacing,s=angular.isUndefined(e.duration)?s:e.duration,c=e.templateUrl?e.templateUrl:c,l=angular.isUndefined(e.position)?l:e.position,p=e.container?e.container:p,m=e.maximumOpen?e.maximumOpen:m},g.closeAll=function(){for(var e=f.length-1;e>=0;e--){var t=f[e];t.css("opacity",0)}},g}]);